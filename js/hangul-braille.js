/**
 * 한글 점자 매핑 데이터
 * 표준 한글 점자 규칙 (6점식 점자)
 * 
 * 점자 셀 구조:
 * [1] [4]
 * [2] [5]
 * [3] [6]
 * 
 * 배열 인덱스 (블록 생성 순서에 맞춤):
 * [0]=1번점, [1]=4번점, [2]=2번점, [3]=5번점, [4]=3번점, [5]=6번점
 * 
 * 블록 생성 시:
 * [0] [1]  ← 윗줄
 * [2] [3]  ← 중간줄
 * [4] [5]  ← 아랫줄
 * 
 * 값: 1 = 돌출(높은 블록 1x1x1), 0 = 평평(낮은 블록 1x1x0.5)
 */

// 초성 (자음) 19개
// 배열 인덱스: [0]=1번점, [1]=4번점, [2]=2번점, [3]=5번점, [4]=3번점, [5]=6번점
const CHOSUNG_BRAILLE = {
    'ㄱ': [0, 1, 0, 0, 0, 0],  // 4
    'ㄲ': [0, 0, 0, 1, 0, 0],  // 5
    'ㄴ': [1, 1, 0, 0, 0, 0],  // 1, 4
    'ㄷ': [0, 1, 1, 0, 0, 0],  // 2, 4
    'ㄸ': [0, 0, 0, 0, 0, 1],  // 6
    'ㄹ': [0, 0, 0, 1, 0, 0],  // 5
    'ㅁ': [1, 0, 0, 1, 0, 0],  // 1, 5
    'ㅂ': [0, 1, 0, 1, 0, 0],  // 4, 5
    'ㅃ': [0, 1, 0, 0, 0, 1],  // 4, 6
    'ㅅ': [0, 0, 0, 0, 0, 1],  // 6
    'ㅆ': [0, 0, 0, 0, 1, 1],  // 3, 6
    'ㅇ': [1, 1, 0, 0, 1, 1],  // 1, 3, 4, 6
    'ㅈ': [0, 0, 0, 1, 0, 1],  // 5, 6
    'ㅉ': [0, 0, 0, 1, 1, 0],  // 3, 5
    'ㅊ': [0, 0, 0, 1, 1, 1],  // 3, 5, 6
    'ㅋ': [1, 1, 0, 0, 1, 0],  // 1, 3, 4
    'ㅌ': [0, 1, 1, 0, 1, 0],  // 2, 3, 4
    'ㅍ': [1, 1, 0, 1, 0, 0],  // 1, 4, 5
    'ㅎ': [0, 0, 1, 1, 0, 1],  // 2, 5, 6
};

// 중성 (모음) 21개
const JUNGSUNG_BRAILLE = {
    'ㅏ': [1, 0, 1, 0, 0, 1],  // 1, 2, 6
    'ㅐ': [1, 1, 1, 0, 1, 0],  // 1, 2, 3, 4
    'ㅑ': [0, 1, 0, 1, 1, 0],  // 3, 4, 5
    'ㅒ': [0, 1, 1, 1, 1, 0],  // 2, 3, 4, 5
    'ㅓ': [0, 1, 1, 0, 0, 1],  // 2, 4, 6
    'ㅔ': [1, 1, 0, 1, 1, 0],  // 1, 3, 4, 5
    'ㅕ': [1, 0, 0, 1, 0, 1],  // 1, 5, 6
    'ㅖ': [1, 0, 1, 1, 0, 1],  // 1, 2, 5, 6
    'ㅗ': [1, 0, 0, 0, 1, 1],  // 1, 3, 6
    'ㅘ': [1, 0, 1, 0, 1, 1],  // 1, 2, 3, 6
    'ㅙ': [1, 1, 1, 0, 1, 1],  // 1, 2, 3, 4, 6
    'ㅚ': [1, 1, 0, 1, 1, 1],  // 1, 3, 4, 5, 6
    'ㅛ': [0, 1, 0, 0, 1, 1],  // 3, 4, 6
    'ㅜ': [1, 1, 0, 0, 1, 0],  // 1, 3, 4
    'ㅝ': [1, 1, 1, 0, 1, 0],  // 1, 2, 3, 4
    'ㅞ': [1, 1, 1, 1, 1, 0],  // 1, 2, 3, 4, 5
    'ㅟ': [1, 1, 0, 1, 1, 0],  // 1, 3, 4, 5
    'ㅠ': [1, 1, 0, 0, 0, 1],  // 1, 4, 6
    'ㅡ': [0, 1, 1, 0, 0, 0],  // 2, 4
    'ㅢ': [0, 1, 1, 1, 1, 1],  // 2, 3, 4, 5, 6
    'ㅣ': [1, 0, 0, 1, 1, 0],  // 1, 3, 5
};

/**
 * 주어진 자모에 대한 점자 패턴을 반환
 * @param {string} jamo - 자음 또는 모음 ('ㄱ', 'ㅏ' 등)
 * @returns {number[]|null} 6개 요소의 배열 (1=돌출, 0=평평) 또는 null
 */
function getBraillePattern(jamo) {
    if (CHOSUNG_BRAILLE[jamo]) {
        return CHOSUNG_BRAILLE[jamo];
    }
    if (JUNGSUNG_BRAILLE[jamo]) {
        return JUNGSUNG_BRAILLE[jamo];
    }
    // 알 수 없는 문자는 null 반환
    console.warn(`알 수 없는 자모: ${jamo}`);
    return null;
}

/**
 * 점자 패턴이 존재하는지 확인
 * @param {string} jamo - 자음 또는 모음
 * @returns {boolean}
 */
function hasPattern(jamo) {
    return CHOSUNG_BRAILLE.hasOwnProperty(jamo) || JUNGSUNG_BRAILLE.hasOwnProperty(jamo);
}

/**
 * 지원되는 모든 자모 목록 반환
 * @returns {string[]}
 */
function getAllSupportedJamo() {
    return [
        ...Object.keys(CHOSUNG_BRAILLE),
        ...Object.keys(JUNGSUNG_BRAILLE)
    ];
}
